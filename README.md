# ThermoX52 🌡️

![Version](https://img.shields.io/badge/version-v1.0-blue)
![MCU](https://img.shields.io/badge/MCU-STC89C52-green)
![License](https://img.shields.io/badge/license-MIT-orange)

**基于STC89C52单片机的MLX90614红外温度测量系统**

## 📋 项目简介

ThermoX52是一个基于STC89C52单片机的非接触式红外温度测量系统。该系统使用MLX90614红外温度传感器实现远程温度检测，配备LCD1602显示屏实时显示温度数据，支持按键操作调节报警阈值，并具备声光报警功能。

### ✨ 主要特性

- 🌡️ **非接触式测温**：基于MLX90614红外传感器，测量精度±0.5℃
- 📺 **实时显示**：LCD1602液晶屏显示温度和系统状态
- 🎮 **按键控制**：支持4个按键操作，包括测温和阈值调节
- 🚨 **智能报警**：超温自动蜂鸣器报警
- 🔧 **模块化设计**：代码结构清晰，便于维护和扩展
- 🐛 **调试支持**：提供完整的硬件测试程序

## 🎯 功能特点

### 核心功能
- **温度测量**：测量范围-70℃~380℃，精度±0.5℃
- **实时显示**：16×2字符LCD显示温度值和系统信息
- **阈值设置**：可通过按键调节温度报警阈值（默认38℃）
- **超温报警**：温度超过阈值时蜂鸣器自动报警
- **开机动画**：系统启动时显示ThermoX52标识

### 交互界面
- **KEY1**：执行温度测量
- **KEY2**：提高报警阈值温度
- **KEY3**：降低报警阈值温度
- **KEY4**：保留扩展功能

## 🏗️ 系统架构

```
ThermoX52/
├── src/                    # 源代码目录
│   ├── main.c             # 主程序入口
│   ├── delay.c/h          # 延时函数模块
│   ├── lcd1602.c/h        # LCD1602显示驱动
│   ├── mlx90614.c/h       # MLX90614温度传感器驱动
│   ├── i2c_soft.c/h       # 软件I2C通信协议
│   ├── key.c/h            # 按键扫描模块
│   └── buzzer.c/h         # 蜂鸣器控制模块
├── debug/                 # 调试测试程序
│   ├── test_mlx90614.c    # 温度传感器测试
│   ├── test_lcd.c         # LCD显示测试
│   ├── test_keys.c        # 按键功能测试
│   ├── test_buzzer.c      # 蜂鸣器测试
│   ├── test_all.c         # 综合功能测试
│   └── README.md          # 调试指南
└── README.md              # 项目说明文档
```

## ⚡ 快速开始

### 📦 硬件要求

| 组件 | 型号 | 数量 | 说明 |
|------|------|------|------|
| 单片机 | STC89C52 | 1 | 主控制器 |
| 温度传感器 | MLX90614 | 1 | 红外温度传感器 |
| 显示屏 | LCD1602 | 1 | 字符液晶显示屏 |
| 按键 | 轻触开关 | 4 | 用户交互按键 |
| 蜂鸣器 | 有源蜂鸣器 | 1 | 声音报警 |
| 晶振 | 12MHz | 1 | 系统时钟 |
| 电阻 | 10kΩ | 4 | 按键上拉电阻 |
| 电阻 | 4.7kΩ | 2 | I2C上拉电阻 |

### 🔌 硬件连接

#### STC89C52引脚分配

| 功能 | 引脚 | 连接 |
|------|------|------|
| **LCD1602** |
| 数据总线 | P0.0-P0.7 | LCD D0-D7 |
| RS | P2.0 | LCD RS |
| RW | P2.1 | LCD RW |
| EN | P2.2 | LCD EN |
| **MLX90614** |
| SCL | P2.3 | I2C时钟线 |
| SDA | P2.4 | I2C数据线 |
| **按键** |
| KEY1 | P3.2 | 测温按键 |
| KEY2 | P3.3 | 阈值+ |
| KEY3 | P3.4 | 阈值- |
| KEY4 | P3.5 | 扩展功能 |
| **蜂鸣器** |
| BEEP | P3.0 | 蜂鸣器控制 |

### 💻 软件环境

- **开发环境**：Keil C51 或 SDCC
- **编程语言**：C语言
- **下载工具**：STC-ISP或其他51单片机下载器

### 🚀 编译和烧录

1. **环境准备**
   ```bash
   # 确保安装了Keil C51或SDCC编译器
   # 准备STC-ISP下载软件
   ```

2. **编译项目**
   ```bash
   # 在Keil C51中打开项目
   # 或使用SDCC命令行编译
   sdcc main.c delay.c lcd1602.c mlx90614.c i2c_soft.c key.c buzzer.c
   ```

3. **烧录程序**
   ```bash
   # 使用STC-ISP烧录hex文件到STC89C52
   # 设置下载参数：12MHz晶振，5V供电
   ```

## 🔧 使用说明

### 基本操作

1. **系统启动**
   - 接通电源，LCD显示开机动画
   - 系统自检MLX90614传感器连接状态
   - 显示"ThermoX52"主界面

2. **温度测量**
   - 按下KEY1执行温度测量
   - LCD显示当前测量温度值
   - 格式：`T:xx.xC`

3. **阈值设置**
   - 按KEY2提高报警阈值
   - 按KEY3降低报警阈值
   - 显示格式：`Th:xxC`

4. **报警功能**
   - 温度超过设定阈值时自动报警
   - 蜂鸣器连续鸣叫3次
   - LCD显示"Warning!"警告信息

### 状态指示

| 显示内容 | 含义 |
|----------|------|
| `ThermoX52` | 系统就绪状态 |
| `Sensor OK` | 传感器连接正常 |
| `Sensor Error!` | 传感器连接异常 |
| `T:xx.xC` | 当前温度值 |
| `Th:xxC` | 当前阈值设置 |
| `Warning!` | 超温报警 |
| `Read Error!` | 读取错误 |

## 🛠️ 调试与测试

项目提供了完整的硬件测试程序，用于验证各个功能模块：

### 测试程序

| 文件 | 功能 | 用途 |
|------|------|------|
| `test_mlx90614.c` | 温度传感器测试 | 验证I2C通信和温度读取 |
| `test_lcd.c` | LCD显示测试 | 验证显示屏各项功能 |
| `test_keys.c` | 按键测试 | 验证按键响应和消抖 |
| `test_buzzer.c` | 蜂鸣器测试 | 验证声音输出功能 |
| `test_all.c` | 综合测试 | 一键测试所有功能 |

### 故障排除

详细的故障排除指南请参考：[debug/README.md](debug/README.md)

## 📊 技术规格

### 系统参数

| 参数 | 规格 |
|------|------|
| **微控制器** |
| 型号 | STC89C52 |
| 时钟频率 | 12MHz |
| 工作电压 | 5V |
| **温度传感器** |
| 型号 | MLX90614ESF-BAA |
| 测量范围 | -70℃ ~ +380℃ |
| 精度 | ±0.5℃ @ 0℃~50℃ |
| 视场角 | 90° |
| 通信接口 | I2C (SMBus兼容) |
| **显示屏** |
| 型号 | LCD1602 |
| 显示字符 | 16×2字符 |
| 背光 | 蓝色LED背光 |
| **其他** |
| 按键数量 | 4个轻触开关 |
| 报警方式 | 有源蜂鸣器 |
| 功耗 | < 100mA @ 5V |

## 📁 代码说明

### 模块功能

- **main.c**：主程序流程控制，用户界面逻辑
- **delay.c/h**：精确延时函数，支持微秒和毫秒级延时
- **lcd1602.c/h**：LCD1602显示驱动，支持字符显示和光标控制
- **mlx90614.c/h**：MLX90614传感器驱动，实现温度数据读取
- **i2c_soft.c/h**：软件I2C协议实现，支持标准I2C时序
- **key.c/h**：按键扫描与消抖处理
- **buzzer.c/h**：蜂鸣器控制，支持多种报警模式

### 代码特点

- ✅ **完整中文注释**：所有代码均有详细的中文注释
- ✅ **模块化设计**：功能模块独立，便于维护和扩展
- ✅ **错误处理**：包含传感器连接检测和读取错误处理
- ✅ **用户体验**：开机动画、状态提示、操作反馈
- ✅ **调试支持**：提供完整的硬件测试程序

## 🤝 贡献指南

欢迎提交问题和改进建议！

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 👥 作者

- **开发者**：[Your Name]
- **项目**：电路综合创新实践
- **时间**：2025年秋冬学期

## 📞 技术支持

如有问题或建议，请通过以下方式联系：

- 📧 Email: [your-email@example.com]
- 💬 Issues: [GitHub Issues](https://github.com/bucolic-ruiqi/ThermoX52/issues)

## 🔗 相关链接

- [MLX90614数据手册](https://www.melexis.com/en/product/MLX90614/Digital-Plug-Play-Infrared-Thermometer-TO-Can)
- [STC89C52数据手册](http://www.stcmcudata.com/)
- [LCD1602使用指南](https://www.sparkfun.com/datasheets/LCD/HD44780.pdf)

---

<div align="center">

**⭐ 如果这个项目对您有帮助，请给它一个Star！⭐**

Made with ❤️ for learning and innovation

</div>
